var xDown=null,yDown=null;function watchHScroll(){document.addEventListener("touchstart",handleTouchStart,!1),document.addEventListener("touchmove",handleTouchMove,!1)}function handleTouchStart(e){xDown=e.touches[0].clientX,yDown=e.touches[0].clientY}function handleTouchMove(e){var l;xDown&&yDown&&(l=e.touches[0].clientX,e=e.touches[0].clientY,l=xDown-l,e=yDown-e,Math.abs(l)>Math.abs(e)&&(0<l?scrollLeft:scrollRight)(),yDown=xDown=null)}function watchDescriptionToggle(){$(".description").children().bind("click",toggle_description)}function watchFullToggle(){var e=$(".full-window").children();$(".image_container");e.on("click",toggle_full)}function toggle_description(){var e=$(".description").children().children(),l=$(".description_container"),t=$(".container"),a=$(".details-bg");e.toggleClass("hidden"),l.toggleClass("hidden"),a.toggleClass("hidden"),t.toggleClass("expanded")}function toggle_full(){var e=$(".image_container"),l=$(".content-wrapper"),t=$(".wrapper"),a=$(".navigation_container"),s=$(".description_container"),r=$(".details-bg"),n=$(".description").children().children(),o=getUrlParameter("full");e.toggleClass("full"),l.toggleClass("full"),t.toggleClass("full"),a.toggleClass("full"),s.toggleClass("full"),n.toggleClass("full"),r.toggleClass("full"),o="true"==o?"false":"true",setUrlParameter("full",o)}function watchSlideButtons(){var e=$(".arrow_left"),l=$(".arrow_right"),t=getUrlParameter("full");e.on("click",function(){scrollLeft()}),l.on("click",function(){scrollRight()}),$(window).bind("keydown",function(e){37==e.keyCode?scrollLeft():39==e.keyCode?scrollRight():"true"==t||38!=e.keyCode&&40!=e.keyCode||toggle_description()})}function scrollLeft(){var e=$(".arrow_left"),l=$(".arrow_right"),t=parseInt($(".projectlength").attr("text")),a=$(".content-slides"),s=$(".details-bg");a.removeClass("active"),s.removeClass("active"),a="Null"==(a=getUrlParameter("slide"))?1:parseInt(a),1==(a=0==--a?1:a)?e.addClass("hidden"):e.removeClass("hidden"),a==t?l.addClass("hidden"):l.removeClass("hidden"),$(".slide"+a).addClass("active"),s.eq(a-1).addClass("active"),s.eq(a-1+t).addClass("active"),setUrlParameter("slide",a),lazyLoad()}function scrollRight(){var e=$(".arrow_left"),l=$(".arrow_right"),t=parseInt($(".projectlength").attr("text")),a=$(".content-slides"),s=$(".details-bg");a.removeClass("active"),s.removeClass("active"),a="Null"==(a=getUrlParameter("slide"))?1:parseInt(a),1==(a=(a+=1)==t+1?t:a)?e.addClass("hidden"):e.removeClass("hidden"),a==t?l.addClass("hidden"):l.removeClass("hidden"),$(".slide"+a).addClass("active"),s.eq(a-1).addClass("active"),s.eq(a-1+t).addClass("active"),setUrlParameter("slide",a),lazyLoad()}function lazyLoad(){var e,l=parseInt($(".projectlength").attr("text")),t=getUrlParameter("slide"),a=1==t?1:t-1,s=t==l?l:t+1;for(i=a;i<s+1;i++)(e=$(".slide"+i).find("img.lazy")).removeClass("lazy"),e.attr("src",e.attr("data-src"))}function resetSlides(){var e,l,t,a,s;0!=$(".slide1").length&&(e=$(".arrow_left"),l=$(".arrow_right"),t=parseInt($(".projectlength").attr("text")),a=$(".content-slides"),s=$(".details-bg"),a.removeClass("active"),s.removeClass("active"),1==(a="Null"==(a=getUrlParameter("slide"))?1:Number(a))?e.addClass("hidden"):e.removeClass("hidden"),a==t?l.addClass("hidden"):l.removeClass("hidden"),$(".slide"+a).addClass("active"),s.eq(a-1).addClass("active"),s.eq(a-1+t).addClass("active"),setUrlParameter("slide",a),lazyLoad())}$(window).on("load",function(){watchHScroll(),watchSlideButtons(),watchDescriptionToggle(),watchFullToggle(),resetSlides()});