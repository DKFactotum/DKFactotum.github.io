var xDown=null,yDown=null;function watchTime(){setInterval(checkDOMChange,100),setTimeout(hideFooter,5e3),setTimeout(hideLoader,3e3),setTimeout(loadContent,3e3)}function checkDOMChange(){$("span").remove(),clearInterval()}function hideFooter(){$(".page-footer").addClass("hiding")}function hideLoader(){$(".loader").addClass("is-hidden")}function watchLanguage(){var e=$(".lang-element"),l=$("a");e.on("click",function(){var e,a,s=$(this);for(s.addClass("active"),s.siblings().removeClass("active"),e=$(".lang-element.active").text(),(a=$(".lang-section."+e)).addClass("lang-active"),a.siblings().removeClass("lang-active"),i=0;i<l.length;i++)setLinkParameter(l[i],"lang",e);setUrlParameter("lang",e)})}function watchScroll(){document.addEventListener("touchstart",handleTouchStart,!1),document.addEventListener("touchmove",handleTouchMove,!1),document.addEventListener("wheel",scroll)}function handleTouchStart(e){xDown=e.touches[0].clientX,yDown=e.touches[0].clientY}function handleTouchMove(e){if(xDown&&yDown){var a=e.touches[0].clientX,s=e.touches[0].clientY,l=xDown-a,c=yDown-s;(Math.abs(l)>Math.abs(c)?0<l?scrollLeft:scrollRight:0<c?scrollUp:scrollDown)(),resetButtons(),yDown=xDown=null}}function watchButtons(){var e=$(".arrow_up"),a=$(".arrow_down");e.on("click",function(){scrollUp(),resetButtons()}),a.on("click",function(){scrollDown(),resetButtons()}),$(window).bind("keydown",function(e){38==e.keyCode?(scrollUp(),resetButtons()):40==e.keyCode&&(scrollDown(),resetButtons())})}function scroll(e){var a=e.deltaY;a<0?(scrollUp(),resetButtons()):0<a&&(scrollDown(),resetButtons())}function scrollUp(){var e=$(".cube-container.cube-1"),a=$(".cube-container.cube-2"),s=$(".cube-container.cube-3"),l=$(".cube-container.cube-4"),c=$(".cube-container.cube-5"),n=$(".cube-container.cube-6"),t=$(".cube-container.cube-7"),r=$(".cube-container.cube-8"),d=$(".cube-container.cube-9"),o=$(".cube-container.cube-13"),i=$(".cube-container.cube-14"),u=$(".cube-container.cube-15"),b=o.length/2,C=i.length/2,v=u.length/2;(0<b||0<C||0<v)&&(e.children().addClass("cube-10").removeClass("cube-1"),e.addClass("cube-10").removeClass("cube-1"),a.children().addClass("cube-11").removeClass("cube-2"),a.addClass("cube-11").removeClass("cube-2"),s.children().addClass("cube-12").removeClass("cube-3"),s.addClass("cube-12").removeClass("cube-3"),l.children().addClass("cube-1").removeClass("cube-4"),l.addClass("cube-1").removeClass("cube-4"),c.children().addClass("cube-2").removeClass("cube-5"),c.addClass("cube-2").removeClass("cube-5"),n.children().addClass("cube-3").removeClass("cube-6"),n.addClass("cube-3").removeClass("cube-6"),t.children().addClass("cube-4").removeClass("cube-7"),t.addClass("cube-4").removeClass("cube-7"),r.children().addClass("cube-5").removeClass("cube-8"),r.addClass("cube-5").removeClass("cube-8"),d.children().addClass("cube-6").removeClass("cube-9"),d.addClass("cube-6").removeClass("cube-9"),o.eq(0).children().addClass("cube-7").removeClass("cube-13"),o.eq(0).addClass("cube-7").removeClass("cube-13"),i.eq(0).children().addClass("cube-8").removeClass("cube-14"),i.eq(0).addClass("cube-8").removeClass("cube-14"),u.eq(0).children().addClass("cube-9").removeClass("cube-15"),u.eq(0).addClass("cube-9").removeClass("cube-15"),o.eq(b).children().addClass("cube-7").removeClass("cube-13"),o.eq(b).addClass("cube-7").removeClass("cube-13"),i.eq(C).children().addClass("cube-8").removeClass("cube-14"),i.eq(C).addClass("cube-8").removeClass("cube-14"),u.eq(v).children().addClass("cube-9").removeClass("cube-15"),u.eq(v).addClass("cube-9").removeClass("cube-15"))}function scrollDown(){var e=$(".cube-container.cube-1"),a=$(".cube-container.cube-2"),s=$(".cube-container.cube-3"),l=$(".cube-container.cube-4"),c=$(".cube-container.cube-5"),n=$(".cube-container.cube-6"),t=$(".cube-container.cube-7"),r=$(".cube-container.cube-8"),d=$(".cube-container.cube-9"),o=$(".cube-container.cube-10"),i=$(".cube-container.cube-11"),u=$(".cube-container.cube-12"),b=o.length/2,C=i.length/2,v=u.length/2;(0<b||0<C||0<v)&&(e.children().addClass("cube-4").removeClass("cube-1"),e.addClass("cube-4").removeClass("cube-1"),a.children().addClass("cube-5").removeClass("cube-2"),a.addClass("cube-5").removeClass("cube-2"),s.children().addClass("cube-6").removeClass("cube-3"),s.addClass("cube-6").removeClass("cube-3"),l.children().addClass("cube-7").removeClass("cube-4"),l.addClass("cube-7").removeClass("cube-4"),c.children().addClass("cube-8").removeClass("cube-5"),c.addClass("cube-8").removeClass("cube-5"),n.children().addClass("cube-9").removeClass("cube-6"),n.addClass("cube-9").removeClass("cube-6"),t.children().addClass("cube-13").removeClass("cube-7"),t.addClass("cube-13").removeClass("cube-7"),r.children().addClass("cube-14").removeClass("cube-8"),r.addClass("cube-14").removeClass("cube-8"),d.children().addClass("cube-15").removeClass("cube-9"),d.addClass("cube-15").removeClass("cube-9"),o.eq(b-1).children().addClass("cube-1").removeClass("cube-10"),o.eq(b-1).addClass("cube-1").removeClass("cube-10"),i.eq(C-1).children().addClass("cube-2").removeClass("cube-11"),i.eq(C-1).addClass("cube-2").removeClass("cube-11"),u.eq(v-1).children().addClass("cube-3").removeClass("cube-12"),u.eq(v-1).addClass("cube-3").removeClass("cube-12"),o.eq(2*b-1).children().addClass("cube-1").removeClass("cube-10"),o.eq(2*b-1).addClass("cube-1").removeClass("cube-10"),i.eq(2*C-1).children().addClass("cube-2").removeClass("cube-11"),i.eq(2*C-1).addClass("cube-2").removeClass("cube-11"),u.eq(2*v-1).children().addClass("cube-3").removeClass("cube-12"),u.eq(2*v-1).addClass("cube-3").removeClass("cube-12"))}function watchDescriptionToggle(){$(".description").children().bind("click",toggle_description)}function watchFullToggle(){var e=$(".full-window").children();$(".image_container");e.on("click",toggle_full)}function toggle_description(){var e=$(".description").children().children(),a=$(".description_container"),s=$(".container"),l=$(".details-bg");e.toggleClass("hidden"),a.toggleClass("hidden"),l.toggleClass("hidden"),s.toggleClass("expanded")}function toggle_full(){var e=$(".image_container"),a=$(".content-wrapper"),s=$(".wrapper"),l=$(".navigation_container"),c=$(".description_container"),n=$(".details-bg"),t=$(".description").children().children(),r=getUrlParameter("full");e.toggleClass("full"),a.toggleClass("full"),s.toggleClass("full"),l.toggleClass("full"),c.toggleClass("full"),t.toggleClass("full"),n.toggleClass("full"),setUrlParameter("full",r="true"==r?"false":"true")}function watchSlideButtons(){var e=$(".arrow_left"),a=$(".arrow_right"),s=getUrlParameter("full");e.on("click",function(){scrollLeft()}),a.on("click",function(){scrollRight()}),$(window).bind("keydown",function(e){37==e.keyCode?scrollLeft():39==e.keyCode?scrollRight():"true"==s||38!=e.keyCode&&40!=e.keyCode||toggle_description()})}function scrollLeft(){var e,a=$(".arrow_left"),s=$(".arrow_right"),l=parseInt($(".projectlength").attr("text")),c=$(".content-slides"),n=$(".details-bg");c.removeClass("active"),n.removeClass("active"),e="Null"==(e=getUrlParameter("slide"))?1:parseInt(e),0==--e&&(e=1),1==e?a.addClass("hidden"):a.removeClass("hidden"),e==l?s.addClass("hidden"):s.removeClass("hidden"),$(".slide"+e).addClass("active"),n.eq(e-1).addClass("active"),n.eq(e-1+l).addClass("active"),setUrlParameter("slide",e),lazyLoad()}function scrollRight(){var e,a=$(".arrow_left"),s=$(".arrow_right"),l=parseInt($(".projectlength").attr("text")),c=$(".content-slides"),n=$(".details-bg");c.removeClass("active"),n.removeClass("active"),e="Null"==(e=getUrlParameter("slide"))?1:parseInt(e),(e+=1)==l+1&&(e=l),1==e?a.addClass("hidden"):a.removeClass("hidden"),e==l?s.addClass("hidden"):s.removeClass("hidden"),$(".slide"+e).addClass("active"),n.eq(e-1).addClass("active"),n.eq(e-1+l).addClass("active"),setUrlParameter("slide",e),lazyLoad()}function lazyLoad(){var e,a,s,l;for(e=parseInt($(".projectlength").attr("text")),s=(a=getUrlParameter("slide"))==e?e:a+1,i=1==a?1:a-1;i<s+1;i++)(l=$(".slide"+i).find("img.lazy")).removeClass("lazy"),l.attr("src",l.attr("data-src"))}function resetLanguage(){var e=getUrlParameter("lang");"Ru"==e?$(".lang-element.Ru").click():"En"!=e&&"Null"!=e||$(".lang-element.En").click()}function resetNavigation(){var e,a,s=window.location.pathname,l=s.substr(1,s.length-6);if(""!=l){var c=l.search("slides"),n=$("home");if(-1!=c){var t=l.substr(0,c-1),r=$(".title ."+t);r.removeClass("is-hidden"),r.siblings().addClass("is-hidden")}n.addClass("active"),e=".title ."+l,(a=$(e)).removeClass("is-hidden").removeAttr("href").addClass("active"),a.siblings().addClass("is-hidden")}else e=".title .home",(a=$(e)).removeClass("is-hidden").removeAttr("href").addClass("active"),a.siblings().addClass("is-hidden")}function resetSlides(){if(0!=$(".slide1").length){var e,a=$(".arrow_left"),s=$(".arrow_right"),l=parseInt($(".projectlength").attr("text")),c=$(".content-slides"),n=$(".details-bg");c.removeClass("active"),n.removeClass("active"),1==(e="Null"==(e=getUrlParameter("slide"))?1:Number(e))?a.addClass("hidden"):a.removeClass("hidden"),e==l?s.addClass("hidden"):s.removeClass("hidden"),$(".slide"+e).addClass("active"),n.eq(e-1).addClass("active"),n.eq(e-1+l).addClass("active"),setUrlParameter("slide",e),lazyLoad()}}function resetButtons(){var e=$(".arrow_up"),a=$(".arrow_down"),s=$(".cube-container.cube-10"),l=$(".cube-container.cube-11"),c=$(".cube-container.cube-12"),n=$(".cube-container.cube-13"),t=$(".cube-container.cube-14"),r=$(".cube-container.cube-15"),d=s.length/2,o=l.length/2,i=c.length/2,u=n.length/2,b=t.length/2,C=r.length/2;0!=u||0!=b||0!=C?e.removeClass("hidden"):0==u&&0==b&&0==C&&e.addClass("hidden"),0!=d||0!=o||0!=i?a.removeClass("hidden"):0==d&&0==o&&0==i&&a.addClass("hidden")}function loadContent(){var e=$(".content-wrapper");$(".page-wrapper").removeClass("load").addClass("loading"),e.removeClass("load").addClass("loading")}function unloadContent(){var e=$(".content-wrapper"),a=$(".page-wrapper");e.removeClass("loading").addClass("unloading"),a.removeClass("loading").addClass("unloading");for(var s=+new Date;new Date-s<500;);}function getUrlParameter(e){var a,s,l=window.location.search.substring(1).split("?");for(s=0;s<l.length;s++)if((a=l[s].split("="))[0]==e)return a[1];return"Null"}function setUrlParameter(e,a){if("Null"!=a){window.location.search.substring(1);var s,l=getUrlParameter(e);s="Null"==l?window.location.href+"?"+e+"="+a:window.location.href.replace(e+"="+l,e+"="+a),window.history.replaceState("","",s)}}function getLinkParameter(e,a){var s,l,c=$(e).attr("href").split("?");for(l=0;l<c.length;l++)if((s=c[l].split("="))[0]==a)return s[1];return"Null"}function setLinkParameter(e,a,s){var l=$(e).attr("href");if("Null"!=s&&null!=l){var c,n=getLinkParameter(e,a);c="Null"==n?l+"?"+a+"="+s:l.replace(a+"="+n,a+"="+s),$(e).attr("href",c)}}$(window).on("load",function(){watchLanguage(),watchScroll(),watchButtons(),watchSlideButtons(),watchDescriptionToggle(),watchFullToggle(),resetLanguage(),resetNavigation(),resetButtons(),resetSlides(),loadContent(),watchTime()}),$(window).on("beforeunload",function(){unloadContent()});